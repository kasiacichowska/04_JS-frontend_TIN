<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikacja To-Do - Rejestracja</title>
    <link rel="stylesheet" href="praca_to_do.css">
    <script>
        function validateForm() {
            const now = new Date();
            console.log(
                now.getFullYear().toString() + "-" +
                (now.getMonth() + 1).toString().padStart(2, '0') + "-" +
                now.getDate().toString().padStart(2, '0') + " " +
                now.getHours().toString().padStart(2, '0') + ":" +
                now.getMinutes().toString().padStart(2, '0') + ":" +
                now.getSeconds().toString().padStart(2, '0')
            );


            const emailField = document.forms["registrationForm"]["email"];
            const passwordField = document.forms["registrationForm"]["haslo"];
            const email = emailField.value;
            const password = passwordField.value;
            const errorMessages = [];

            document.getElementById("emailError").textContent = "";
            document.getElementById("passwordError").textContent = "";
            document.getElementById("summaryError").textContent = "";

            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

            if(email.length===0){
                document.getElementById("emailError").textContent = "Pole Email nie może być puste";
                errorMessages.push("Pole Email nie może być puste");
                console.log("Pole Email nie może być puste")
            }

            else if (email.replace(/\s/g, "") === "") {
                document.getElementById("emailError").textContent = "Email nie może składać się wyłącznie ze spacji.";
                errorMessages.push("Email nie może zawierać wyłącznie spacji.");
                console.log("Email nie może zawierać wyłącznie spacji.")
            }
            else if (!emailRegex.test(email)) {
                document.getElementById("emailError").textContent = "Wprowadź poprawny adres e-mail.";
                errorMessages.push("Niepoprawny adres e-mail.");
                console.log("Niepoprawny adres e-mail.")
            }

            if (password.length===0){
                document.getElementById("passwordError").textContent = "Pole haslo nie może być puste";
                errorMessages.push("Pole haslo nie może być puste");
                console.log("Pole haslo nie może być puste")
            }

            else if (password.replace(/\s/g, "") === "") {
                document.getElementById("passwordError").textContent = "Hasło nie może składać się wyłącznie ze spacji.";
                errorMessages.push("Hasło nie może zawierać wyłącznie spacji.");
                console.log("Hasło nie może zawierać wyłącznie spacji.")
            }
            else if (password.length < 2 || password.length > 60) {
                document.getElementById("passwordError").textContent = "Hasło powinno mieć od 2 do 60 znaków.";
                errorMessages.push("Niepoprawna długość hasła.");
                console.log("Niepoprawna długość hasła.")
            }

            if (errorMessages.length > 0) {
                document.getElementById("summaryError").innerHTML = "Wystąpiły błędy:<br>" + errorMessages.join("<br>");
                return false;
            }
            console.log("Rejestracja udana!")
            return true;
        }
    </script>
</head>
<body>

<header>
    <div class="header">
        <h1>Aplikacja To-Do</h1>
        <p>Prosta aplikacja WWW do zarządzania listami zadań (To-Do)</p>
    </div>
</header>

<main>
    <section class="content">
        <h2 id="o_aplikacji">Rejestracja konta</h2>
        <p>Uwaga! Hasło powinno mieć od 2 do 60 znaków.</p>

        <form name="registrationForm" onsubmit="return validateForm()">
            <div>
                <p>E-mail: <input type="text" name="email" /></p>
                <span id="emailError" style="color:red;"></span>
                <p>Hasło: <input type="password" name="haslo" /></p>
                <span id="passwordError" style="color:red;"></span>
            </div>
            <input type="submit" value="Submit">
            <p id="summaryError" style="color:red;"></p>
        </form>
    </section>
</main>

</body>
</html>
